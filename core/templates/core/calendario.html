{% extends 'core/base.html' %}
{% load static %}

{% block title %}Calendario{% endblock %}
{% block links %}
<link href="{% static 'core/assets/extra-libs/datatables.net-bs4/css/dataTables.bootstrap4.css' %}" rel="stylesheet">
<!-- Custom CSS -->
<link href="{% static 'core/assets/libs/fullcalendar/dist/fullcalendar.min.css' %}" rel="stylesheet" />
<!-- Custom CSS -->
<link href="{% static 'core/dist/css/style.min.css' %}" rel="stylesheet">
{% endblock %}
{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-11">
            <div class="card">
                <div class="">
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="card-body b-l calender-sidebar">
                                <div id="calendar"></div>
                            </div>
                        </div>
                    </div>
                </div>  
            </div>
        </div>
    </div>
</div>    
{% endblock %}
{% block js %}
    <script src="{% static 'core/assets/extra-libs/sparkline/sparkline.js' %}"></script>
    <script src="{% static 'core/assets/extra-libs/datatables.net/js/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'core/dist/js/pages/datatable/datatable-basic.init.js' %}"></script>

    <script src="{% static 'core/assets/libs/jquery/dist/jquery.min.js' %}"></script>
    <script src="{% static 'core/assets/extra-libs/taskboard/js/jquery.ui.touch-punch-improved.js' %}"></script>
    <script src="{% static 'core/assets/extra-libs/taskboard/js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'core/assets/libs/popper.js/dist/umd/popper.min.js' %}"></script>
    <script src="{% static 'core/assets/libs/bootstrap/dist/js/bootstrap.min.js' %}"></script>
    <!-- apps -->
    <script src="{% static 'core/assets/libs/perfect-scrollbar/dist/perfect-scrollbar.jquery.min.js' %}"></script>

    <!--This page JavaScript -->
    <script src="{% static 'core/assets/libs/moment/min/moment.min.js' %}"></script>
    <script src="{% static 'core/assets/libs/fullcalendar/dist/fullcalendar.min.js' %}"></script>
    <script src="{% static 'core/dist/js/pages/calendar/cal-init.js' %}"></script>
    <script>
        //initializing CalendarApp
        $(window).on('load', function() {
            var dates = [{% for cita in lista_citas %}
                            {title:'{{ cita.client.first_name }} {{ cita.client.last_name }}',
                            start:new Date('{{ cita.date|date:'Y-m-d' }} {{ cita.hour|date:'H:i:s' }}'),
                            end:new Date('{{ cita.date|date:'Y-m-d' }} {{ cita.endhour|date:'H:i:s' }}'),
                            className: 'bg-info'},
                        {% endfor %}]
            $.CalendarApp.init(dates)
        })
    </script>
{% endblock %}

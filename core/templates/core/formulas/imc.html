{% extends 'core/base.html' %}
{% load static %}

{% block title %}IMC{% endblock %}

{% block links %}
  <link href="{% static '/lib/select2-4.0.13/css/select2.css' %}" rel="stylesheet"/>
  <link href="{% static '/lib/select2-4.0.13/css/select2-bootstrap4.min.css' %}" rel="stylesheet"/>
  <script src="{% static '/lib/select2-4.0.13/js/select2.js' %}"></script>
  
{% endblock %}

{% block content %}
<strong>Calculo de indice de masa corporal</strong>
<main role="main">
  <div class="container">
    <div class="row mt-3">
      <div class="col-md-8 mx-auto mb-5">
        <form action="" method="post">{% csrf_token %}
          <h3 class="mb-4">IMC</h3>
          {{ form.errors }}
          <p>
            <label>Cliente:</label>
            {{ form.client }}
          </p>
          <p>
            <label>Peso (kg):</label>
            <input type="number" name="weight" id="id_weight" class="form-control" step="0.01" min="0">
          </p>
          <p>
            <label>Estatura (m):</label>
            <input type="number" name="height" id="id_height" class="form-control" step="0.01" min="0">
          </p>
          <p class="text-center">
            <label class="control-label h3">IMC:</label>
          </p>
          <p class="text-center h1">
            <label id="id_imc"></label>
          </p>
          <p><input type="submit" class="btn btn-primary btn-block" value="Calcular"></p>
        </form>
      </div>
    </div>
  </div>
</main>
<script>
  $(document).ready(function () {
    $('.select2').select2({
      theme:'bootstrap4'
    });
  });

  $(function(){
		$("input").change(function(){
			var peso = Number($("#id_weight").val());
			var altura = Number($("#id_height").val());
			if (altura){
				$("#id_imc").text((peso/(altura*altura)).toFixed(2));
			}else{
        $("#id_imc").text(0);
      }
		});
	});
</script>

{% endblock %}